<template name="schemaTaxonomyContainer">
  <div class="panel panel-inverse">
    <div class="panel-heading">
        <h4 class="panel-title">{{title}} / {{authors}}</h4>
    </div>
    <div class="panel-body">
      {{> schemaTaxonomyWizard}}
    </div>
    <div class="panel-footer text-right">
      {{#if _id}}
          {{> maWizardDiscard}}
          {{> maWizardBack}}
          {{> maWizardOk}}
        {{else}}
          {{> maWizardDiscard}}
          {{> maWizardCreate}}
        {{/if}}
    </div>
  </div>
</template>

<template name="schemaTaxonomyWizard">
  <div class="col-xs-4">
    <button class="btn btn-danger taxonomy-field" data-field="type">Add/Edit Types</button>
    {{> typesTable}}
  </div>
  <div class="col-xs-4">
    <button class="btn btn-danger taxonomy-field" data-field="material">Add/Edit Materials</button>
    {{> materialsTable}}
  </div>
  <div class="col-xs-4">
    <button class="btn btn-danger taxonomy-field" data-field="technique">Add/Edit Techniques</button>
    {{> techniquesTable}}
  </div>

  {{> addTypeModal}}
  {{> addMaterialModal}}
  {{> addTechniqueModal}}

</template>

<template name="addTypeModal">
  <div id="addTypeModal" class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title">Artwork types</h4>
        </div>
        <div class="modal-body">
          <input type="text" class="new-type" placeholder="New type" autofocus>
          <button class="btn btn-success add-type">Add</button>
          <table>
            <thead>
              <tr>
                <th>Fields</th>
              </tr>
            </thead>
            <tbody>
              {{#each typeNames}}
                <tr>
                  <td>{{> maWizardTextInput field=this label=" "}}</td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal">Ok</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
</template>

<template name="addMaterialModal">
  <div id="addMaterialModal" class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title">Materials</h4>
        </div>
        <div class="modal-body">
          <input type="text" class="new-material" placeholder="New material" autofocus>
          <button class="btn btn-success add-material">Add</button>
          <table>
            <thead>
              <tr>
                <th></th>
              </tr>
            </thead>
            <tbody>
              {{#each materialNames}}
                <tr>
                  <td>{{> maWizardTextInput field=this label=" "}}</td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal">Ok</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
</template>

<template name="addTechniqueModal">
  <div id="addTechniqueModal" class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title">Techniques</h4>
        </div>
        <div class="modal-body">
          <input type="text" class="new-technique" placeholder="New technique" autofocus>
          <button class="btn btn-success add-technique">Add</button>
          <table>
            <thead>
              <tr>
                <th></th>
              </tr>
            </thead>
            <tbody>
              {{#each techniqueNames}}
                <tr>
                  <td>{{> maWizardTextInput field=this label=" "}}</td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal">Ok</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
</template>

<template name="typesTable">
  <div id="typesTable">
    <table>
      <thead>
        <tr>
          <th>Types</th>
        </tr>
      </thead>
      <tbody>
        {{#each this.type}}
          <tr class="{{isTypeSelected id}}" data-ref="{{id}}">
            <td>{{this.name}}</td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
</template>

<template name="materialsTable">
  <div id="materialsTable">
    <table>
      <thead>
        <tr>
          <th>Materials</th>
        </tr>
      </thead>
      <tbody>
        {{#each materials}}
          <tr class="{{isSelected id}}" data-ref='{{id}}'>
            <td>{{this.name}}</td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
</template>

<template name="techniquesTable">
  <div id="techniquesTable">
    <table>
      <thead>
        <tr>
          <th>Techniques</th>
        </tr>
      </thead>
      <tbody>
        {{#each techniques}}
          <tr class="{{isSelected id}}" data-ref='{{id}}'>
            <td>{{this.name}}</td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
</template>